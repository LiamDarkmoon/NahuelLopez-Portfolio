---
import Layout from '@/layouts/Layout.astro';
import BadgeGroup from '@/components/BadgeGroup';
import { LANGS } from '@/lib/langs';
import type { Project } from '@/lib/types';
import { dictionaries } from "@/lib/i18n";

export function getStaticPaths() {
  return LANGS.flatMap((lang) => {
    const lan = dictionaries[lang];

    return lan.projects.data.map((project: Project) => ({
      params: {
        lang,
        name: project.slug,
      },
      props: {
        project,
        lang,
      },
    }));
  });
}

const { lang } = Astro.params;
const lan = lang ? dictionaries[lang] : dictionaries['es'];
const { project } = Astro.props;
---

<Layout lan={lan}>
  <section class="">

    <h1 class="text-3xl font-bold pb-3 flex flex-wrap gap-3 items-centerjustify-between mb-6 border-b border-light-border dark:border-dark-border">
      {project.name}
      <BadgeGroup { ...project.stack }/>
    </h1>

    <article class="flex flex-col gap-5">
      <p>{project.description}<a class="underline text-brand hover:text-brand-hover active:text-brand-active" href={project.url} target="_blank"> {lan.projects.link} {project.name}</a></p>
      <p >{lan.projects.linkP1} <a class="underline text-brand hover:text-brand-hover active:text-brand-active" href={`/${lang}/projects`}>{ lan.projects.title }</a> {lan.projects.linkP2}</p>
      <div class="flex items-center justify-center gap-6 py-6 h-90 overflow-x-scroll hide-scrollbar rounded-lg border border-light-border dark:border-dark-border bg-light-card dark:bg-dark-card">
        <img class="h-full object-fill hover:shadow shadow-dark-bg hover:scale-105" src={project.img} alt={project.name} />
        <img class="h-full object-fill hover:shadow shadow-dark-bg hover:scale-105" src={project.smImg} alt={project.name} />
      </div>
    </article>

  </section>
</Layout>